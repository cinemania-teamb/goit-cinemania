{"version":3,"file":"main-DtcqRih8.js","sources":["../../src/js/modal.js","../../src/js/catolog.js","../../src/main.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst modalUi = movie => {\n  console.log(movie);\n  const instance = basicLightbox.create(`\n            <form id=\"movie-form\">\n            <p class=\"close\">&#10006;</p>\n              <img src=\"https://image.tmdb.org/t/p/w500/${\n                movie.poster_path\n              }\" width=\"375\" height=\"478\" alt=\"${movie.title}\">\n              <div>\n                <h2>${movie.title.toUpperCase()}</h2>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Vote/Votes</th>\n                            <td><span class=\"vote\">${movie.vote_average}</span> / <span class=\"vote\">${movie.vote_count}</span></td>\n                        </tr>\n                        \n                    </thead>\n                    <tbody>\n                        <tr>\n                            <th>Popularity</th>\n                            <td>${movie.popularity}</td>\n                        </tr>\n                        <tr>\n                            <th>Genre</th>\n                            <td>${movie.genres\n                              .map(genre => genre.name)\n                              .join(' ')}</td>\n                        </tr>\n                    </tbody>\n                </table>\n              <h3>ABOUT</h3>\n              <p>${movie.overview}</p>\n              <button class=\"movie-submit\" type=\"submit\">Add to my library</button>\n              </div>\n            </form>\n          `);\n  instance.show();\n  const closeButton = document.querySelector('.close');\n  closeButton.addEventListener('click', () => {\n    instance.close();\n  });\n  document.addEventListener('keyup', function (e) {\n    if (e.code === 'Escape') {\n      instance.close();\n    }\n  });\n  const movieForm = document.getElementById('movie-form');\n  const movieSubmit = document.querySelector('.movie-submit');\n\n  let movies = getLocalStorage();\n\n  if (movies.some(m => m.id === movie.id)) {\n    movieSubmit.textContent = 'Remove from my library';\n  } else {\n    movieSubmit.textContent = 'Add to my library';\n  }\n\n  movieForm.addEventListener('submit', e => {\n    e.preventDefault();\n    movies = getLocalStorage();\n\n    if (movieSubmit.textContent === 'Remove from my library') {\n      const movies = getLocalStorage();\n      const updatedMovies = movies.filter(m => m.id !== movie.id);\n      localStorage.setItem('movies', JSON.stringify(updatedMovies));\n      movieSubmit.textContent = 'Add to my library';\n      return;\n    }\n    const movieData = {\n      id: movie.id,\n      title: movie.title,\n      poster_path: movie.poster_path,\n      overview: movie.overview,\n      vote_average: movie.vote_average,\n      vote_count: movie.vote_count,\n      popularity: movie.popularity,\n      genres: movie.genres.map(genre => genre.name).join(','),\n    };\n\n    movies.push(movieData);\n    localStorage.setItem('movies', JSON.stringify(movies));\n    movieSubmit.textContent = 'Remove from my library';\n  });\n};\nfunction getLocalStorage() {\n  let movies;\n  if (localStorage.getItem('movies') === null) {\n    movies = [];\n  } else {\n    movies = JSON.parse(localStorage.getItem('movies'));\n  }\n  return movies;\n}\nexport default modalUi;\n","// catalog weekly api\nimport axios from 'axios';\n\nconst apiKey=\"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmMWRkMzEzNDEyYzUzMjQyYTU2Nzc5ZjVjMWIwNWJlNSIsIm5iZiI6MTc1MzY5OTE4OS4xOTcsInN1YiI6IjY4ODc1Mzc1MGU0ODE4YTk5OTUyYjQ0YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.H565ZjOCGF6NhGwiaRj-BAZ12tadYHWeWDarSsxXtc4\"\n\n\nexport const fetchWeeklyFilms =async (api=apiKey,page=1) => {\n    const options = {\n        method: 'GET',\n        url: `https://api.themoviedb.org/3/trending/all/week?language=en-US&page=${page}`,\n        headers: {\n          accept: 'application/json',\n          Authorization: `Bearer ${api}`\n        }\n      };\n\n    try{\n        const res =await axios.request(options);\n        const filteredData = res.data.results.map( filter=> ({\n            title: filter.title || filter.name,\n            rating: filter.vote_average,\n            genreId: filter.genre_ids,\n            year: filter.release_date || filter.first_air_date,\n            id: filter.id,\n            image: filter.poster_path\n        }));\n        return filteredData;\n    }\n    catch(err){\n        return false;\n    }\n}\n\n//filtered by name and year or both\nexport const fetchSearchFilms = async (input, year=null, api=apiKey, page=1) =>{\n\n    const filteredUrl = year !== null ? `https://api.themoviedb.org/3/search/movie?query=${input}&include_adult=false&language=en-US&page=${page}&primary_release_year=${year}` :\n    `https://api.themoviedb.org/3/search/movie?query=${input}&include_adult=false&language=en-US&page=${page}`\n    const options = {\n    method: 'GET',\n    url: filteredUrl,\n    headers: {\n        accept: 'application/json',\n        Authorization: `Bearer ${api}`\n    }\n    };\n\n    try{\n        const res = await axios.request(options)\n        const filteredFilms = res.data.results.map(filter => ({\n            title: filter.title || filter.name,\n            rating: filter.vote_average,\n            genreId: filter.genre_ids,\n            year: filter.release_date || filter.first_air_date,\n            id: filter.id,\n            image: filter.poster_path\n        }));\n        return filteredFilms;\n    }\n    catch(err){\n        return err.data;\n    }\n        \n}\n\n","import axios from 'axios';\nimport modalUi from './js/modal.js';\nimport { fetchWeeklyFilms, fetchSearchFilms } from './js/catolog.js';\n\nconst form = document.getElementById('catolog-form');\nconst list = document.querySelector('.list');\n\nconst api_key = '4e64f2e0a197aa7c5d1170773553320c';\n\nconst defaultBlocks = async () => {\n  try {\n    const images = await fetchWeeklyFilms();\n    const newImages = images\n      .map(({ id, title, image, year, rating }) => {\n        const date = year.split('-')[0];\n        return image\n          ? `<li id=\"${id}\"  style=\"background-image: url(https://image.tmdb.org/t/p/w500/${image});background-size: cover;\n    background-position: center;\n    width: 395px;\n    height: 574px;\">\n            <div class=\"info\">\n                <p>${title.toUpperCase()} | ${date}</p>\n            </div>\n        </li>`\n          : '';\n      })\n      .join('');\n    list.insertAdjacentHTML('beforeend', newImages);\n    console.log(images);\n  } catch (error) {\n    console.log(error);\n  }\n};\ndefaultBlocks();\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  list.innerHTML = '';\n\n  const input = e.target.elements.input.value;\n  const year = e.target.elements.choose.value;\n\n  try {\n    const images = await fetchSearchFilms(input, year);\n    console.log(images);\n\n    if (images.length === 0) {\n      list.innerHTML = `<li class=\"not-found\">OOPS... We are very sorry! We donâ€™t have any results matching your search.</li>`;\n      return;\n    }\n    const newImages = images\n      .map(({ id, title, image, year, rating }) => {\n        const date = year.split('-')[0];\n        return image\n          ? `<li id=\"${id}\"  style=\"background-image: url(https://image.tmdb.org/t/p/w500/${image});background-size: cover;\n    background-position: center;\n    width: 395px;\n    height: 574px;\">\n            <div class=\"info\">\n                <p>${title.toUpperCase()} | ${date}</p>\n            </div>\n        </li>`\n          : '';\n      })\n      .join('');\n    list.insertAdjacentHTML('beforeend', newImages);\n  } catch (error) {\n    console.log(error);\n  }\n\n  form.reset();\n});\nlist.addEventListener('click', async e => {\n  if (e.target.nodeName === 'LI') {\n    const id = e.target.id;\n\n    try {\n      const response = await axios.get(\n        `https://api.themoviedb.org/3/movie/${id}?api_key=${api_key}&language=en-US`\n      );\n      console.log(response.data);\n      modalUi(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n});\n"],"names":["modalUi","movie","instance","basicLightbox.create","genre","e","movieForm","movieSubmit","movies","getLocalStorage","m","updatedMovies","movieData","apiKey","fetchWeeklyFilms","api","page","options","axios","filter","fetchSearchFilms","input","year","err","form","list","api_key","defaultBlocks","images","newImages","id","title","image","rating","date","error","response"],"mappings":"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"}
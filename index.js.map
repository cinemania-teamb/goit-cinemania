{"version":3,"file":"index.js","sources":["../src/js/weekly-home.js","../src/js/scroll.js","../src/js/herocard.js","../src/js/hero.js"],"sourcesContent":["// API Yapılandırması\nimport axios from \"axios\";\nimport modalUi from './modal.js';\nconst API_KEY = \"31537460e1a179eb456191c366c87865\";\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst IMG_BASE_URL = \"https://image.tmdb.org/t/p/\";\n\n\n\n// DOM elements\nconst weeklyTrendsContainer = document.getElementById('weekly-trends');\n// Yıldız ikonları\nconst startEmpty = `<svg class=\"icon\" id=\"stars-empty\"width=\"18\" height=\"18\">\n          <use href=\"./icons.svg#icon-star-outline\"></use>\n        </svg>`;\nconst startHalf = `<svg class=\"icon\" id=\"stars-half\" fill=\"#F87719\" width=\"18\" height=\"18\">\n        <defs>\n        <clipPath id=\"half-clip\">\n          <rect x=\"0\" y=\"0\" width=\"12\" height=\"24\"/>\n        </clipPath>\n      </defs>\n      <use href=\"#icon-star-half\"/>\n          <use href=\"./icons.svg#icon-star-half\"></use>\n        </svg>`;\nconst startFull = `<svg class=\"icon\" fill=\"#F87719\" width=\"18\" height=\"18\">\n          <use href=\"./icons.svg#icon-star\"></use>\n        </svg>`;\n\n// Rating yıldızlarını oluşturma fonksiyonu\nfunction renderRatingStars(voteAverage) {\n  // 10 üzerinden olan puanı 5 üzerine dönüştür\n  const normalizedRating = voteAverage / 2;\n  const fullStars = Math.floor(normalizedRating);\n  const hasHalfStar = normalizedRating % 1 >= 0.5;\n  \n  let starsHTML = '';\n  \n  // Tam yıldızlar\n  starsHTML += startFull.repeat(fullStars);\n  \n  // Yarım yıldız\n  if (hasHalfStar) {\n    starsHTML += startHalf;\n  }\n  \n  // Boş yıldızlar\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n  starsHTML += startEmpty.repeat(emptyStars);\n  \n  return `<div class=\"movie-rating\">${starsHTML}</div>`;\n}\n\n// Haftalık trend filmleri getirme fonksiyonu\nasync function fetchWeeklyTrends() {\n  try {\n    // Filmleri ve tür listesini paralel olarak al\n    const [moviesResponse, genresResponse] = await Promise.all([\n      axios.get(`${BASE_URL}/trending/movie/week?api_key=${API_KEY}`),\n      axios.get(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`)\n    ]);\n    \n    const genresMap = new Map(genresResponse.data.genres.map(genre => [genre.id, genre.name]));\n    displayWeeklyTrends(moviesResponse.data.results.slice(0, 3), genresMap);\n  } catch (error) {\n    console.error('Veri alınırken hata:', error);\n    weeklyTrendsContainer.innerHTML = '<p>Filmler yüklenirken hata oluştu. Lütfen tekrar deneyin.</p>';\n  }\n}\n// Haftalık trend filmlerini ekranda gösterme fonksiyonu\nfunction displayWeeklyTrends(movies, genresMap) {\n  weeklyTrendsContainer.innerHTML = movies.map(movie => {\n    // Film türlerini al (ilk 2 türü kullan)\n    const movieGenres = movie.genre_ids\n      .map(id => genresMap.get(id))\n      .filter(Boolean)\n      .slice(0, 2)\n      .join(', ');\n    \n    // Tarih bilgisi (sadece yıl)\n    const releaseYear = movie.release_date ? movie.release_date.substring(0, 4) : 'Tarih Yok';\n    \n    // Tür ve tarih bilgisini birleştir\n    const genreAndDate = movieGenres ? `${movieGenres} || ${releaseYear}` : releaseYear;\n    //rating\n    const ratingStars = renderRatingStars(movie.vote_average);\n    return `\n    <div class=\"movie-card\" data-id=\"${movie.id}\">\n      <img class=\"movie-poster\" \n           src=\"${movie.poster_path ? IMG_BASE_URL + 'w500' + movie.poster_path : 'https://via.placeholder.com/300x450?text=Poster+Yok'}\" \n           alt=\"${movie.title}\"\n           onerror=\"this.src='https://via.placeholder.com/300x450?text=Poster+Hatası'\">\n      <div class=\"movie-info\">\n       <div class=\"title-date\">\n       <h3 class=\"movie-title\">${movie.title}</h3>\n       <p class=\"movie-date\">${genreAndDate}</p>\n       </div>\n       ${ratingStars}\n      </div>\n    </div>\n    `;\n  }).join('');\n}\n// Sayfa yüklendiğinde trend filmleri getir\ndocument.addEventListener('DOMContentLoaded', fetchWeeklyTrends);\n\nconst movieList= document.querySelector(\".movie-grid\");\nmovieList.addEventListener('click', async e => {\n  if (e.target.nodeName === 'IMG') {\n    const id =e.target.parentElement.dataset.id;\n    try {\n      const response = await axios.get(\n        `https://api.themoviedb.org/3/movie/${Number(id)}?api_key=${API_KEY}&language=en-US`\n      );\n      modalUi(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }   \n});\n","// DOM TAM YÜKLENDİĞİNDE ÇALIŞTIR\n    document.addEventListener('DOMContentLoaded', () => {\n      const btn = document.getElementById('scrollToTopBtn');\n      \n      // Scroll event dinleyicisi\n      window.addEventListener('scroll', () => {\n        if (window.pageYOffset > 300) {\n          btn.classList.add('visible');\n        } else {\n          btn.classList.remove('visible');\n        }\n      });\n      \n      // Tıklama eventi\n      btn.addEventListener('click', () => {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      });\n    });","import modalUi from './modal.js';\n\nconst API_KEY = '4e64f2e0a197aa7c5d1170773553320c';\n\nasync function openHeroCard(movieId) {\n  try {\n    const res = await fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n    const movie = await res.json();\n\n    const creditsRes = await fetch(`https://api.themoviedb.org/3/movie/${movieId}/credits?api_key=${API_KEY}`);\n    const creditsData = await creditsRes.json();\n\n    const directorObj = creditsData.crew.find(p => p.job === 'Director');\n    const director = directorObj ? directorObj.name : 'Unknown';\n\n    movie.director = director;\n    movie.release_year = movie.release_date ? movie.release_date.slice(0, 4) : 'N/A';\n    movie.runtime = movie.runtime ? `${movie.runtime} min` : 'N/A';\n    movie.language = movie.original_language.toUpperCase();\n\n    modalUi(movie);\n\n\n\n    // \"Add to my library\" butonunu kaldır \nsetTimeout(() => {\n  const addButton = document.querySelector('.movie-submit');\n  if (addButton) addButton.remove();\n}, 100);\n\n//\"Add to my library\" butonu eklenmek istenirse setTimeout fonksiyonun eklenmesi yeterlidir.\n\n\n    // Modal'ı ortalamak için CSS class ekle\n    setTimeout(() => {\n      const modal = document.querySelector('.basicLightbox__placeholder > *');\n      if (modal) modal.classList.add('custom-herocard');\n    }, 50);\n\n    // Arka plana tıklayınca kapanması\n    const backdrop = document.querySelector('.basicLightbox');\n    backdrop.addEventListener('click', e => {\n      if (e.target.classList.contains('basicLightbox')) {\n        backdrop.remove();\n      }\n    });\n\n  } catch (err) {\n    console.error(\"Detaylar alınırken hata:\", err);\n    alert(\"Film detayları yüklenemedi.\");\n  }\n}\n\nexport default openHeroCard;","import modalUi from './modal.js';\nimport openHeroCard from './herocard.js';\n\n\nconst API_KEY = '4e64f2e0a197aa7c5d1170773553320c';\n\nconst carousel = document.getElementById('carousel');\nconst prevBtn = document.getElementById('prev-btn');\nconst nextBtn = document.getElementById('next-btn');\n\nconst detailsModal = document.getElementById('details-modal');\nconst trailerModal = document.getElementById('trailer-modal');\nconst detailsContainer = document.getElementById('details-container');\nconst trailerContainer = document.getElementById('trailer-container');\nconst closeDetails = document.getElementById('close-details');\nconst closeTrailer = document.getElementById('close-trailer');\n\nasync function loadTrendingMovies() {\n  try {\n    const res = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}`);\n    const data = await res.json();\n\n    if (!data.results || data.results.length === 0) {\n      showDefaultSlide();\n      return;\n    }\n\n    // Her film için bir slayt oluştur\n    data.results.forEach(film => {\n      const slide = document.createElement('div');\n      slide.className = 'hero-slide';\n      slide.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${film.backdrop_path})`;\n\n\n\n      slide.innerHTML = `\n        <div class=\"hero-overlay\"></div>\n        <div class=\"hero-content\">\n          <h1>${film.title}</h1>\n          <p>${film.overview.slice(0, 200)}...</p>\n          <p>IMDb: ${film.vote_average}</p>\n          <button onclick='openDetailsModal(${JSON.stringify(film).replace(/'/g, \"\\\\'\")})'>More Details</button>\n          <button onclick='openTrailerModal(${film.id})'>Watch Trailer</button>\n        </div>\n      `;\n\n      \n\n      carousel.appendChild(slide);\n    });\n\n  } catch (err) {\n    console.error('Hata:', err);\n    showDefaultSlide();\n  }\n}\n\n\n\n\n\n\n\n\nfunction showDefaultSlide() {\n  const slide = document.createElement('div');\n  slide.className = 'hero-slide';\n  slide.style.backgroundImage = `url('default-hero.jpg')`;\n  slide.innerHTML = `\n    <div class=\"hero-overlay\"></div>\n    <div class=\"hero-content\">\n      <h1>Welcome to Cinemania</h1>\n      <p>Explore timeless stories and epic moments from world cinema.</p>\n      <button onclick=\"window.location.href='catalog.html'\">Get Started</button>\n    </div>\n  `;\n  carousel.appendChild(slide);\n}\n\n// Butonlarla kaydırma\nprevBtn.addEventListener('click', () => {\n  carousel.scrollBy({ left: -window.innerWidth, behavior: 'smooth' });\n});\n\nnextBtn.addEventListener('click', () => {\n  carousel.scrollBy({ left: window.innerWidth, behavior: 'smooth' });\n});\n\n\n\n// Modallar\nfunction openDetailsModal(film) {\n  openHeroCard(film.id);\n}\n\n\n\n\n\nasync function openTrailerModal(filmId) {\n  try {\n    const res = await fetch(`https://api.themoviedb.org/3/movie/${filmId}/videos?api_key=${API_KEY}&language=en-US`);\n    const data = await res.json();\n\n    const trailer = data.results.find(v => v.type === \"Trailer\" && v.site === \"YouTube\");\n\n    if (!trailer) {\n      trailerContainer.innerHTML = `<p>Sorry, no trailer available.</p>`;\n    } else {\n      trailerContainer.innerHTML = `\n        <iframe width=\"100%\" height=\"400\" src=\"https://www.youtube.com/embed/${trailer.key}\" frameborder=\"0\" allowfullscreen></iframe>\n      `;\n    }\n\n    trailerModal.classList.remove('hidden');\n  } catch (err) {\n    trailerContainer.innerHTML = `<p>Error loading trailer.</p>`;\n    trailerModal.classList.remove('hidden');\n  }\n}\n\n// Modal kapama\ncloseDetails.onclick = () => detailsModal.classList.add('hidden');\ncloseTrailer.onclick = () => trailerModal.classList.add('hidden');\n\n// Sayfa yüklenince başla\ndocument.addEventListener('DOMContentLoaded', loadTrendingMovies);\n\nwindow.openDetailsModal = openDetailsModal;\nwindow.openTrailerModal= openTrailerModal;\n\n"],"names":["API_KEY","BASE_URL","IMG_BASE_URL","weeklyTrendsContainer","startEmpty","startHalf","startFull","renderRatingStars","voteAverage","normalizedRating","fullStars","hasHalfStar","starsHTML","emptyStars","fetchWeeklyTrends","moviesResponse","genresResponse","axios","genresMap","genre","displayWeeklyTrends","error","movies","movie","movieGenres","id","releaseYear","genreAndDate","ratingStars","movieList","e","response","modalUi","btn","openHeroCard","movieId","directorObj","p","director","addButton","modal","backdrop","err","carousel","prevBtn","nextBtn","detailsModal","trailerModal","trailerContainer","closeDetails","closeTrailer","loadTrendingMovies","data","showDefaultSlide","film","slide","openDetailsModal","openTrailerModal","filmId","trailer","v"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../src/js/weekly-home.js","../src/js/scroll.js"],"sourcesContent":["// API Yapılandırması\nimport axios from \"axios\";\nimport modalUi from './modal.js';\nconst API_KEY = \"31537460e1a179eb456191c366c87865\";\nconst BASE_URL = \"https://api.themoviedb.org/3\";\nconst IMG_BASE_URL = \"https://image.tmdb.org/t/p/\";\n\n\n\n// DOM elements\nconst weeklyTrendsContainer = document.getElementById('weekly-trends');\n// Yıldız ikonları\nconst startEmpty = `<svg class=\"icon\" id=\"stars-empty\"width=\"18\" height=\"18\">\n          <use href=\"./icons.svg#icon-star-outline\"></use>\n        </svg>`;\nconst startHalf = `<svg class=\"icon\" id=\"stars-half\" fill=\"#F87719\" width=\"18\" height=\"18\">\n        <defs>\n        <clipPath id=\"half-clip\">\n          <rect x=\"0\" y=\"0\" width=\"12\" height=\"24\"/>\n        </clipPath>\n      </defs>\n      <use href=\"#icon-star-half\"/>\n          <use href=\"./icons.svg#icon-star-half\"></use>\n        </svg>`;\nconst startFull = `<svg class=\"icon\" fill=\"#F87719\" width=\"18\" height=\"18\">\n          <use href=\"./icons.svg#icon-star\"></use>\n        </svg>`;\n\n// Rating yıldızlarını oluşturma fonksiyonu\nfunction renderRatingStars(voteAverage) {\n  // 10 üzerinden olan puanı 5 üzerine dönüştür\n  const normalizedRating = voteAverage / 2;\n  const fullStars = Math.floor(normalizedRating);\n  const hasHalfStar = normalizedRating % 1 >= 0.5;\n  \n  let starsHTML = '';\n  \n  // Tam yıldızlar\n  starsHTML += startFull.repeat(fullStars);\n  \n  // Yarım yıldız\n  if (hasHalfStar) {\n    starsHTML += startHalf;\n  }\n  \n  // Boş yıldızlar\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n  starsHTML += startEmpty.repeat(emptyStars);\n  \n  return `<div class=\"movie-rating\">${starsHTML}</div>`;\n}\n\n// Haftalık trend filmleri getirme fonksiyonu\nasync function fetchWeeklyTrends() {\n  try {\n    // Filmleri ve tür listesini paralel olarak al\n    const [moviesResponse, genresResponse] = await Promise.all([\n      axios.get(`${BASE_URL}/trending/movie/week?api_key=${API_KEY}`),\n      axios.get(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`)\n    ]);\n    \n    const genresMap = new Map(genresResponse.data.genres.map(genre => [genre.id, genre.name]));\n    displayWeeklyTrends(moviesResponse.data.results.slice(0, 3), genresMap);\n  } catch (error) {\n    console.error('Veri alınırken hata:', error);\n    weeklyTrendsContainer.innerHTML = '<p>Filmler yüklenirken hata oluştu. Lütfen tekrar deneyin.</p>';\n  }\n}\n// Haftalık trend filmlerini ekranda gösterme fonksiyonu\nfunction displayWeeklyTrends(movies, genresMap) {\n  weeklyTrendsContainer.innerHTML = movies.map(movie => {\n    // Film türlerini al (ilk 2 türü kullan)\n    const movieGenres = movie.genre_ids\n      .map(id => genresMap.get(id))\n      .filter(Boolean)\n      .slice(0, 2)\n      .join(', ');\n    \n    // Tarih bilgisi (sadece yıl)\n    const releaseYear = movie.release_date ? movie.release_date.substring(0, 4) : 'Tarih Yok';\n    \n    // Tür ve tarih bilgisini birleştir\n    const genreAndDate = movieGenres ? `${movieGenres} || ${releaseYear}` : releaseYear;\n    //rating\n    const ratingStars = renderRatingStars(movie.vote_average);\n    return `\n    <div class=\"movie-card\" data-id=\"${movie.id}\">\n      <img class=\"movie-poster\" \n           src=\"${movie.poster_path ? IMG_BASE_URL + 'w500' + movie.poster_path : 'https://via.placeholder.com/300x450?text=Poster+Yok'}\" \n           alt=\"${movie.title}\"\n           onerror=\"this.src='https://via.placeholder.com/300x450?text=Poster+Hatası'\">\n      <div class=\"movie-info\">\n       <div class=\"title-date\">\n       <h3 class=\"movie-title\">${movie.title}</h3>\n       <p class=\"movie-date\">${genreAndDate}</p>\n       </div>\n       ${ratingStars}\n      </div>\n    </div>\n    `;\n  }).join('');\n}\n// Sayfa yüklendiğinde trend filmleri getir\ndocument.addEventListener('DOMContentLoaded', fetchWeeklyTrends);\n\nconst movieList= document.querySelector(\".movie-grid\");\nmovieList.addEventListener('click', async e => {\n  if (e.target.nodeName === 'IMG') {\n    const id =e.target.parentElement.dataset.id;\n    try {\n      const response = await axios.get(\n        `https://api.themoviedb.org/3/movie/${Number(id)}?api_key=${API_KEY}&language=en-US`\n      );\n      modalUi(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }   \n});\n","// DOM TAM YÜKLENDİĞİNDE ÇALIŞTIR\n    document.addEventListener('DOMContentLoaded', () => {\n      const btn = document.getElementById('scrollToTopBtn');\n      \n      // Scroll event dinleyicisi\n      window.addEventListener('scroll', () => {\n        if (window.pageYOffset > 300) {\n          btn.classList.add('visible');\n        } else {\n          btn.classList.remove('visible');\n        }\n      });\n      \n      // Tıklama eventi\n      btn.addEventListener('click', () => {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      });\n    });"],"names":["API_KEY","BASE_URL","IMG_BASE_URL","weeklyTrendsContainer","startEmpty","startHalf","startFull","renderRatingStars","voteAverage","normalizedRating","fullStars","hasHalfStar","starsHTML","emptyStars","fetchWeeklyTrends","moviesResponse","genresResponse","axios","genresMap","genre","displayWeeklyTrends","error","movies","movie","movieGenres","id","releaseYear","genreAndDate","ratingStars","movieList","e","response","modalUi","btn"],"mappings":"kIAGA,MAAMA,EAAU,mCACVC,EAAW,+BACXC,EAAe,8BAKfC,EAAwB,SAAS,eAAe,eAAe,EAE/DC,EAAa;AAAA;AAAA,gBAGbC,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBASZC,EAAY;AAAA;AAAA,gBAKlB,SAASC,EAAkBC,EAAa,CAEtC,MAAMC,EAAmBD,EAAc,EACjCE,EAAY,KAAK,MAAMD,CAAgB,EACvCE,EAAcF,EAAmB,GAAK,GAE5C,IAAIG,EAAY,GAGhBA,GAAaN,EAAU,OAAOI,CAAS,EAGnCC,IACFC,GAAaP,GAIf,MAAMQ,EAAa,EAAIH,GAAaC,EAAc,EAAI,GACtD,OAAAC,GAAaR,EAAW,OAAOS,CAAU,EAElC,6BAA6BD,CAAS,QAC/C,CAGA,eAAeE,GAAoB,CACjC,GAAI,CAEF,KAAM,CAACC,EAAgBC,CAAc,EAAI,MAAM,QAAQ,IAAI,CACzDC,EAAM,IAAI,GAAGhB,CAAQ,gCAAgCD,CAAO,EAAE,EAC9DiB,EAAM,IAAI,GAAGhB,CAAQ,6BAA6BD,CAAO,iBAAiB,CAChF,CAAK,EAEKkB,EAAY,IAAI,IAAIF,EAAe,KAAK,OAAO,IAAIG,GAAS,CAACA,EAAM,GAAIA,EAAM,IAAI,CAAC,CAAC,EACzFC,EAAoBL,EAAe,KAAK,QAAQ,MAAM,EAAG,CAAC,EAAGG,CAAS,CACvE,OAAQG,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3ClB,EAAsB,UAAY,gEACnC,CACH,CAEA,SAASiB,EAAoBE,EAAQJ,EAAW,CAC9Cf,EAAsB,UAAYmB,EAAO,IAAIC,GAAS,CAEpD,MAAMC,EAAcD,EAAM,UACvB,IAAIE,GAAMP,EAAU,IAAIO,CAAE,CAAC,EAC3B,OAAO,OAAO,EACd,MAAM,EAAG,CAAC,EACV,KAAK,IAAI,EAGNC,EAAcH,EAAM,aAAeA,EAAM,aAAa,UAAU,EAAG,CAAC,EAAI,YAGxEI,EAAeH,EAAc,GAAGA,CAAW,OAAOE,CAAW,GAAKA,EAElEE,EAAcrB,EAAkBgB,EAAM,YAAY,EACxD,MAAO;AAAA,uCAC4BA,EAAM,EAAE;AAAA;AAAA,kBAE7BA,EAAM,YAAcrB,EAAe,OAASqB,EAAM,YAAc,qDAAqD;AAAA,kBACrHA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iCAIIA,EAAM,KAAK;AAAA,+BACbI,CAAY;AAAA;AAAA,SAElCC,CAAW;AAAA;AAAA;AAAA,KAIpB,CAAG,EAAE,KAAK,EAAE,CACZ,CAEA,SAAS,iBAAiB,mBAAoBd,CAAiB,EAE/D,MAAMe,EAAW,SAAS,cAAc,aAAa,EACrDA,EAAU,iBAAiB,QAAS,MAAMC,GAAK,CAC7C,GAAIA,EAAE,OAAO,WAAa,MAAO,CAC/B,MAAML,EAAIK,EAAE,OAAO,cAAc,QAAQ,GACzC,GAAI,CACF,MAAMC,EAAW,MAAMd,EAAM,IAC3B,sCAAsC,OAAOQ,CAAE,CAAC,YAAYzB,CAAO,iBAC3E,EACMgC,EAAQD,EAAS,IAAI,CACtB,OAAQV,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACF,CACH,CAAC,ECrHG,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMY,EAAM,SAAS,eAAe,gBAAgB,EAGpD,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,YAAc,IACvBA,EAAI,UAAU,IAAI,SAAS,EAE3BA,EAAI,UAAU,OAAO,SAAS,CAExC,CAAO,EAGDA,EAAI,iBAAiB,QAAS,IAAM,CAClC,OAAO,SAAS,CACd,IAAK,EACL,SAAU,QACpB,CAAS,CACT,CAAO,CACP,CAAK"}
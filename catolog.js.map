{"version":3,"file":"catolog.js","sources":["../src/main.js"],"sourcesContent":["import './js/header.js';\nimport axios from 'axios';\nimport modalUi from './js/modal.js';\nimport {\n  loadWeeklyFilms,\n  loadSearchFilms,\n} from './js/catolog.js';\n\nconst form = document.getElementById('catolog-form');\nconst list = document.querySelector('.list');\nconst pagination = document.querySelector('.pagination ul');\n\nconst api_key = '4e64f2e0a197aa7c5d1170773553320c';\n\n\nlet lastSearch = { input: '', year: '', isSearch: false };\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const input = e.target.elements.input.value;\n  const year = e.target.elements.choose.value;\n  if (input === \"\") {\n    list.innerHTML = `<li class=\"not-found\">Please enter a search term.</li>`;\n    pagination.innerHTML = '';\n    lastSearch = { input: '', year: '', isSearch: false };\n    return;\n  }\n  const newLastSearch = await loadSearchFilms(input, year, 1);\n  lastSearch.isSearch = newLastSearch.isSearch;\n  lastSearch.input = newLastSearch.input;\n  lastSearch.year = newLastSearch.year;\n  form.reset();\n});\n\npagination.addEventListener('click', async e => {\n  if (e.target.tagName === 'LI' && e.target.dataset.page) {\n    const page = Number(e.target.dataset.page);\n    if (lastSearch.isSearch) {\n      \n      await loadSearchFilms(lastSearch.input, lastSearch.year, page);\n    } else {\n      await loadWeeklyFilms(page);\n    }\n  }\n});\n\nlist.addEventListener('click', async e => {\n  if (e.target.nodeName === 'LI') {\n    const id = e.target.id;\n    try {\n      const response = await axios.get(\n        `https://api.themoviedb.org/3/movie/${id}?api_key=${api_key}&language=en-US`\n      );\n      modalUi(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }   \n});  \n\n// Initial load\nloadWeeklyFilms();\n// Weekly kısmı \n"],"names":["form","list","pagination","api_key","lastSearch","input","year","newLastSearch","loadSearchFilms","page","loadWeeklyFilms","id","response","axios","modalUi","error"],"mappings":"gLAQA,MAAMA,EAAO,SAAS,eAAe,cAAc,EAC7CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,gBAAgB,EAEpDC,EAAU,mCAGhB,IAAIC,EAAa,CAAE,MAAO,GAAI,KAAM,GAAI,SAAU,IAElDJ,EAAK,iBAAiB,SAAU,MAAM,GAAK,CACzC,EAAE,eAAc,EAChB,MAAMK,EAAQ,EAAE,OAAO,SAAS,MAAM,MAChCC,EAAO,EAAE,OAAO,SAAS,OAAO,MACtC,GAAID,IAAU,GAAI,CAChBJ,EAAK,UAAY,yDACjBC,EAAW,UAAY,GACvBE,EAAa,CAAE,MAAO,GAAI,KAAM,GAAI,SAAU,IAC9C,MACD,CACD,MAAMG,EAAgB,MAAMC,EAAgBH,EAAOC,EAAM,CAAC,EAC1DF,EAAW,SAAWG,EAAc,SACpCH,EAAW,MAAQG,EAAc,MACjCH,EAAW,KAAOG,EAAc,KAChCP,EAAK,MAAK,CACZ,CAAC,EAEDE,EAAW,iBAAiB,QAAS,MAAM,GAAK,CAC9C,GAAI,EAAE,OAAO,UAAY,MAAQ,EAAE,OAAO,QAAQ,KAAM,CACtD,MAAMO,EAAO,OAAO,EAAE,OAAO,QAAQ,IAAI,EACrCL,EAAW,SAEb,MAAMI,EAAgBJ,EAAW,MAAOA,EAAW,KAAMK,CAAI,EAE7D,MAAMC,EAAgBD,CAAI,CAE7B,CACH,CAAC,EAEDR,EAAK,iBAAiB,QAAS,MAAM,GAAK,CACxC,GAAI,EAAE,OAAO,WAAa,KAAM,CAC9B,MAAMU,EAAK,EAAE,OAAO,GACpB,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAC3B,sCAAsCF,CAAE,YAAYR,CAAO,iBACnE,EACMW,EAAQF,EAAS,IAAI,CACtB,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACF,CACH,CAAC,EAGDL"}